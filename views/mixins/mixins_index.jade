mixin custom_header(t, exit)
    header
        +navbar(t, exit)

mixin navbar(_t, exit)
    .navbar
        .container
            a(href='https://www.alohakarnataka.com')
                img(alt='https://www.alohakarnataka.com', src='/img/logo.png')

            a(ng-show='loggedIn && selectMultiple', ng-click="pay_amount()", href='')
                    | Pay ₹ {{total_amount}}
                
            a(href='#', ng-show='loggedIn && isCenter')
                #add-student(ng-click="make_payment()",ng-show="!selectMultiple")
                    | !{t('Payment to TASK')}
                #add-student(ng-click="make_payment()",ng-show="selectMultiple")
                    | !{t('Cancel')}

            a(ng-click="logout($event)", href='')= exit

mixin custom_footer(about_txt)
    //- footer
    h3.about(ng-show="loggedIn")= about_txt
    footer(ng-show="loggedIn")
        p !{t('layout.footer.text')}

//- login
mixin login_form
    div(ng-controller="LoginController")
        form(name='tandc', ng-show='!termsAgreed && !loggedIn && !showOTPForm && !registrationForm')
            .panel.panel-default(style='margin-top:100px;')
                .panel-body(style='height:70vh; overflow-y:scroll; background-color:white;border-radius: 10px;')
                    div(style='text-align:center;')
                        h3 Terms and Conditions
                        hr
                        p
                            | This is where your terms and conditions content will go.
            div(style='text-align:center;')
                button.btn.btn-success(style='border-radius: 10px; margin:20px; color: #fff; background-color: #00C84F; border-color: #00C84F; cursor: pointer; box-shadow: 0 2px 2px 0 rgba(0,0,0,.14), 0 3px 1px -2px rgba(0,0,0,.2), 0 1px 5px 0 rgba(0,0,0,.12);margin-bottom: .3125rem; font-size: 1rem; padding: 15px; font-weight: bolder; text-decoration: none; text-transform: uppercase; letter-spacing: 0; border: 0; outline: 0; transition: box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1); will-change: box-shadow,transform;min-width:200px;', ng-click='register()') REGISTER
                button.btn.btn-success(style='border-radius: 10px; margin:20px; color: #fff; background-color: #2bbbad; border-color: #2bbbad; cursor: pointer; box-shadow: 0 2px 2px 0 rgba(0,0,0,.14), 0 3px 1px -2px rgba(0,0,0,.2), 0 1px 5px 0 rgba(0,0,0,.12);margin-bottom: .3125rem; font-size: 1rem; padding: 15px; font-weight: bolder; text-decoration: none; text-transform: uppercase; letter-spacing: 0; border: 0; outline: 0; transition: box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1); will-change: box-shadow,transform;min-width:200px;', ng-click='checkStatus()') CHECK STATUS
                                
        form.login#login(ng-show="showOTPForm")
            p.title= 'Welcome'
            img(src="/img/logo.png")
            //- loader

            .login-wrapper#login-wrapper
                .info-message(ng-show="!otpSent")
                    h5= 'Please enter your 10 digit mobile number. Keep your phone handy to enter the OTP received on your number.' 
                .info-message(ng-show="otpSent")
                    h5= 'Please enter the OTP we sent on your number.'

                input#username(ng-show="!otpSent", tabindex="1", autocapitalize="off", autocorrect="off", type="number", placeholder="Phone Number", autofocus, , ng-model='username', min-length=10, max-length=10)
                i.fa.fa-phone
                input#number(ng-show="otpSent", tabindex="2", type="password", placeholder="password", ng-model='password')
                i.fa.fa-key

                a(ng-show="otpSent", href="#", ng-click='generateOTP(username)')= 'Resend OTP?' 
                
                .right-a
                    a(ng-show="otpSent", href="#", ng-click='tryDifferentNumber()')= 'Try different Number!' 

                p(ng-show="!otpSent", style="color:red;")
                    | {{msg}}

                button(ng-show="!otpSent", ng-click='generateOTP(username)')
                    //- i.spinner
                    span.state= 'submit'
            
                button(ng-show="otpSent", ng-click='send(username, password)')
                    //- i.spinner
                    span.state= 'submit'

        div(ng-show='registrationForm', style='margin-top:100px;')
            div
                ncy-breadcrumb
                .container
                    .row
                        .col-md-8.col-md-offset-2
                            form(name='registration', ng-submit='save_student()', ng-show='!dataSaved')
                                .panel.panel-default(style='margin-top:20px;')
                                    .panel-body(style='height:70vh; overflow-y:scroll; background-color:white;border-radius: 10px;padding: 15px;')
                                        div

                                            div.mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                span !{t('Select Programme')}
                                                select.mdc-select__native-control(ng-model='student.programmename', ng-options='x for x in programmeoptions', ng-required="true")
                                                    option(value="" disabled selected)
                                                        | Select Programme

                                            div.mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label(ng-show="student.programmename == 'Center Programme'")
                                                span !{t('Select Center')}
                                                select.mdc-select__native-control(ng-model='student.centername', ng-options='x.name for x in centeroptions', ng-change="onCenterChange(student.centername, 'center')")
                                                    option(value="" disabled selected)
                                                        | Select Center

                                            div.mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label(ng-show="student.programmename == 'School Programme'")
                                                span !{t('Select School')}
                                                select.mdc-select__native-control(ng-model='student.schoolname', ng-options='x.name for x in schooloptions', ng-change="onCenterChange(student.schoolname, 'school')")
                                                    option(value="" disabled selected)
                                                        | Select School
                                            
                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                span !{t('Center Code')}
                                                input.mdl-textfield__input(type="text", ng-model='student.centercode', ng-disabled="true", ng-required="true")

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                input.mdl-textfield__input(type="email", ng-model="student.email", ng-required="true")
                                                label.mdl-textfield__label !{t('Email')}

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                input.mdl-textfield__input(type="number", ng-model="student.phone", ng-minlength="10", ng-maxlength="10", ng-required="true", ng-change="onPhoneChange(student.phone)")
                                                label.mdl-textfield__label !{t('Phone Number')}

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                input.mdl-textfield__input(type="number", ng-model="otp", ng-minlength="6", ng-maxlength="6", ng-required="true", ng-change="onPwdChange(otp)")
                                                label.mdl-textfield__label !{t('OTP')}

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                input.mdl-textfield__input(type="text", ng-model="student.name", ng-required="true")
                                                label.mdl-textfield__label !{t('Name Of Student')}

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                input.mdl-textfield__input(type="text", ng-model="student.parentname", ng-required="true")
                                                label.mdl-textfield__label !{t('Parent Name')}

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                span !{t('Date Of Birth')}                                                
                                                input.mdl-textfield__input(type="date", ng-model="student.dateofbirth", ng-required="true")

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                label.mdl-textfield__label !{t('Gender')}
                                                label(style="float:left;width:50%;")
                                                    input.mdl-textfield__input(type="radio", ng-model="student.gender", value="Male", style="float:left;width:10%;margin-top: 3px;")
                                                    | Male
                                                label(style="float:left;width:50%;")
                                                    input.mdl-textfield__input(type="radio", ng-model="student.gender", value="Female", style="float:left;width:10%;margin-top: 3px;")
                                                    | Female

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                textarea.mdl-textfield__input(ng-model="student.address", ng-required="true", rows="2")
                                                label.mdl-textfield__label !{t('Address')}

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                label.mdl-textfield__label !{t('Do you want a T-Shirt?')}                                            
                                                switch(ng-model="student.tshirtrequired",on="YES",off="NO",class="green")

                                            div.mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label(ng-show="student.tshirtrequired")
                                                span !{t('T-Shirt Size')}
                                                select.mdc-select__native-control(ng-model='student.tshirtsize', ng-options='x for x in tshirtsizeoptions')
                                                    option(value="" disabled selected)
                                                        | Select T-Shirt Size

                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                span !{t('Upload Student Image')}  
                                                input(type = 'file', file-model = 'myFile', ng-src='{{student.photo}}', accept="image/*")
                                            
                                            .mdl-textfield.mdl-js-textfield.mdl-textfield--floating-label
                                                span !{t('Upload Birth Certificate')}  
                                                input(type = 'file', file-model = 'myFile1', ng-src='{{student.birthcertificate}}', accept="image/*")


                                p(style="text-align:center;color:white;font-weight:bolder;margin:0;padding:0;",ng-show="!isOTPVerified && !isPhoneDuplicate")
                                    | OTP SHOULD BE VALIDATED

                                 p(style="text-align:center;color:white;font-weight:bolder;margin:0;padding:0;",ng-show="isPhoneDuplicate")
                                    | Sorry! Phone number already registered.

                                div(style='text-align:center;')
                                    button.btn.btn-success(style='border-radius: 10px; margin:20px; color: #fff; background-color: #4caf50; border-color: #4caf50; cursor: pointer; box-shadow: 0 2px 2px 0 rgba(0,0,0,.14), 0 3px 1px -2px rgba(0,0,0,.2), 0 1px 5px 0 rgba(0,0,0,.12);margin-bottom: .3125rem; font-size: 1rem; padding: 15px; font-weight: bolder; text-decoration: none; text-transform: uppercase; letter-spacing: 0; border: 0; outline: 0; transition: box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1); will-change: box-shadow,transform;', type='submit', ng-click='save_student()', ng-disabled="!isOTPVerified || isPhoneDuplicate") Submit

                            div(ng-show='dataSaved')
                                .panel.panel-default(style='margin-top:20px;')
                                    .panel-body(style='height:70vh; overflow-y:scroll; background-color:white;border-radius: 10px;padding: 15px;')
                                        div(ng-show='savingFailed',style="text-align:center;")
                                            .swal2-icon.swal2-error
                                                span.swal2-x-mark
                                                    span.swal2-x-mark-line-left
                                                    span.swal2-x-mark-line-right
                                            h2#swal2-title.swal2-title Oops! Couldnot register!
                                            #swal2-content.swal2-content(style='display: block;')
                                            | Please try again or contact the center office.
                                            .swal2-buttonswrapper(style='display: block;')
                                            button.swal2-confirm.swal2-styled(type='button', style='background-color: rgb(48, 133, 214); border-left-color: rgb(48, 133, 214); border-right-color: rgb(48, 133, 214);') OK
                                            button.swal2-cancel.swal2-styled(type='button', style='display: none; background-color: rgb(170, 170, 170);') Cancel
                                        div(ng-show='savingSuccess',style="text-align:center;")
                                            span.checkmark
                                                div.checkmark_circle
                                                div.checkmark_stem
                                                div.checkmark_kick
                                            h2#swal2-title.swal2-title(style="color:#0080ff;") Hurray! You successfully registered!
                                            #swal2-content.swal2-content(style='display: block;')
                                                | Please check back soon for the status..
                                            .swal2-buttonswrapper(style='display: block;')
                                            //- button.swal2-confirm.swal2-styled(type='button', style='background-color: rgb(48, 133, 214); border-left-color: rgb(48, 133, 214); border-right-color: rgb(48, 133, 214);') OK
                                            button.swal2-cancel.swal2-styled(type='button', style='display: none; background-color: rgb(170, 170, 170);') Cancel
            